#!/usr/bin/env sh

# 🎯 Spike Academic Platform - Simple Pre-commit
echo "🎯 Running pre-commit checks..."

# Basic security check
if git diff --cached | grep -E "(password|secret|api[_-]?key|token|private[_-]?key)" > /dev/null; then
  echo "❌ Potential secret detected in staged changes!"
  exit 1
fi

# Hebrew/RTL checks (essential)
if git diff --cached | grep -E "(margin-left|margin-right|padding-left|padding-right)" > /dev/null; then
  echo "❌ Forbidden directional CSS detected! Use logical properties."
  exit 1
fi

# Run lint-staged (handles linting, formatting, type-checking)
npx lint-staged

echo "✅ Pre-commit checks passed!"