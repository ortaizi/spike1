#!/usr/bin/env sh

# ğŸ¯ Spike Academic Platform - Simple Pre-commit
echo "ğŸ¯ Running pre-commit checks..."

# Basic security check
if git diff --cached | grep -E "(password|secret|api[_-]?key|token|private[_-]?key)" > /dev/null; then
  echo "âŒ Potential secret detected in staged changes!"
  exit 1
fi

# Hebrew/RTL checks (essential)
if git diff --cached | grep -E "(margin-left|margin-right|padding-left|padding-right)" > /dev/null; then
  echo "âŒ Forbidden directional CSS detected! Use logical properties."
  exit 1
fi

# Run lint-staged (handles linting, formatting, type-checking)
npx lint-staged

echo "âœ… Pre-commit checks passed!"